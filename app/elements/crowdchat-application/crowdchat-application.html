<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/iron-input/iron-input.html">
<link rel="import" href="/elements/chat-banner/chat-banner.html">
<link rel="import" href="/elements/chat-message/chat-message.html">
<link rel="import" href="/elements/team-member/team-member.html">
<link rel="import" href="/elements/crowdchat-overlay/crowdchat-overlay.html">
<link rel="import" href="/elements/user-profile/user-profile.html">

<dom-module id="crowdchat-application">
	<link rel="stylesheet" href="crowdchat-application.css">
	<template>
	  <iron-ajax auto 
	  	url="/data.json" 
	  	handle-as="json"
	  	on-response="handleAjaxResponse" 
	  	last-response="{{lastResponse}}"></iron-ajax>
	  <div class="crowdchat-wrapper">
	  		<div class="pane-wrapper">
	  			<div class="pane-chat">
	  				<header>
	  					<chat-banner title="{{lastResponse.title}}"></chat-banner>
	  				</header>
	  				<div class="pane-body pane-chat-body">
	  					<chat-message messages="{{lastResponse.messages}}"></chat-message>
	  				</div>
	  				<div class="pane-footer pane-chat-footer">
	  					<input is="iron-input" placeholder="Type a message...">		
	  					<paper-icon-button icon="icons:attachment"></paper-icon-button>
	  				</div>
	  				<crowdchat-overlay id="crowdchatOverlay" overlaystatus="{{overlaystatus}}">
	  					<user-profile user="{{selectedUser}}" overlaystatus="{{overlaystatus}}"></user-profile>
	  				</crowdchat-overlay>	
	  			</div>
	  			<div class="pane-list">
	  				<header>
	  					<chat-banner title="Team Members" closable></chat-banner>
	  				</header>
	  				<div class="pane-body pane-list-body">
	  					<team-member members="{{lastResponse.members}}" selected="{{selected}}"></team-member>
	  				</div>
	  			</div>
	  		</div>
	  </div>
  </template>
  <script src="crowdchat-application.js"></script>
</dom-module>



